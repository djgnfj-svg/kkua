#!/bin/bash
# ë°°í¬ë¥¼ ìœ„í•œ ë³´ì•ˆ í‚¤ ìƒì„± ìŠ¤í¬ë¦½íŠ¸

echo "ğŸ” KKUA ë°°í¬ìš© ë³´ì•ˆ í‚¤ ìƒì„± ì¤‘..."

# 32ë°”ì´íŠ¸ ëœë¤ í‚¤ ìƒì„±
SECRET_KEY=$(openssl rand -base64 32)
JWT_SECRET=$(openssl rand -base64 32)
DB_PASSWORD=$(openssl rand -base64 16)

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… ìƒì„±ëœ ë³´ì•ˆ í‚¤ë“¤:"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ”‘ SECRET_KEY:"
echo "$SECRET_KEY"
echo ""
echo "ğŸ”‘ JWT_SECRET:"
echo "$JWT_SECRET" 
echo ""
echo "ğŸ”‘ DB_PASSWORD:"
echo "$DB_PASSWORD"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“ ì´ í‚¤ë“¤ì„ ë³µì‚¬í•´ì„œ ë‹¤ìŒ íŒŒì¼ë“¤ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”:"
echo ""
echo "1. backend/.env.prod"
echo "2. .env (Lightsail ì„œë²„ì˜ í™˜ê²½ë³€ìˆ˜ íŒŒì¼)"
echo ""
echo "âš ï¸  ë³´ì•ˆì„ ìœ„í•´ ì´ í‚¤ë“¤ì„ ì•ˆì „í•œ ê³³ì— ì €ì¥í•˜ì„¸ìš”!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# .env íŒŒì¼ ìƒì„±
cat > .env.lightsail << EOF
# Lightsail ë°°í¬ìš© í™˜ê²½ë³€ìˆ˜
DB_PASSWORD=$DB_PASSWORD
SECRET_KEY=$SECRET_KEY
JWT_SECRET=$JWT_SECRET
EOF

echo ""
echo "âœ… .env.lightsail íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!"
echo "ğŸš€ ì´ì œ Lightsailì— ë°°í¬í•  ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."